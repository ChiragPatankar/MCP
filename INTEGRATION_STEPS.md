# Gemini MCP Server Integration Guide

## Current Status âœ…
Your integration is **95% complete**! Here's what you have:

- âœ… Frontend React app with complete chat interface
- âœ… API service configured for MCP protocol
- âœ… Gemini MCP server with all endpoints
- âœ… Database integration with SQLAlchemy
- âœ… Authentication and rate limiting middleware

## Step 1: Deploy the Gemini MCP Server

### Option A: Railway Deployment (Recommended)

1. **Create Railway Account**
   ```bash
   # Install Railway CLI
   npm install -g @railway/cli
   
   # Login to Railway
   railway login
   ```

2. **Deploy from the gemini-mcp-server folder**
   ```bash
   cd gemini-mcp-server
   railway deploy
   ```

3. **Set Environment Variables in Railway Dashboard**
   - `GEMINI_API_KEY`: Your Google Gemini API key
   - `DATABASE_URL`: Will be auto-generated by Railway
   - `MCP_AUTH_TOKEN`: Create a secure token (e.g., `your-secure-token-2024`)

### Option B: Render/Heroku Deployment

Use the provided `Dockerfile` in the gemini-mcp-server folder.

## Step 2: Get Google Gemini API Key (Free)

1. Visit [Google AI Studio](https://makersuite.google.com/app/apikey)
2. Create a new API key
3. Copy the key for deployment

## Step 3: Update Frontend Environment Variables

Create/update `.env.local` in your root directory:

```env
# MCP Server Configuration
VITE_API_URL=https://your-railway-app.up.railway.app
VITE_MCP_AUTH_TOKEN=your-secure-token-2024

# Google OAuth (if using)
VITE_GOOGLE_CLIENT_ID=your-google-client-id
```

## Step 4: Initialize the Database

After deployment, run the database initialization:

```bash
# SSH into your Railway deployment or run locally
cd gemini-mcp-server
python init_db.py
```

## Step 5: Test the Integration

1. **Test MCP Server Health**
   ```bash
   curl https://your-railway-app.up.railway.app/mcp/health
   ```

2. **Test from Frontend**
   - Start your frontend: `npm run dev`
   - Open the chat interface
   - Send a test message

## Step 6: Production Deployment

### Frontend Deployment (Vercel/Netlify)

1. **Build the frontend**
   ```bash
   npm run build
   ```

2. **Deploy to Vercel**
   ```bash
   # Install Vercel CLI
   npm install -g vercel
   
   # Deploy
   vercel
   ```

3. **Set Environment Variables in Vercel**
   - Copy all environment variables from `.env.local`

## Architecture Overview

```
Frontend (React/TypeScript)
    â†“ HTTP Requests
MCP Server (FastAPI + Gemini)
    â†“ Database Operations
PostgreSQL (Railway)
    â†“ AI Processing
Google Gemini API
```

## API Endpoints Available

Your frontend can use these MCP endpoints:

- `POST /mcp/process` - Single message processing
- `POST /mcp/batch` - Batch message processing
- `GET /mcp/health` - Health check
- `GET /mcp/capabilities` - Server capabilities
- `GET /mcp/version` - MCP version info

## Features Working Out of the Box

âœ… Real-time chat interface
âœ… Google Gemini AI responses
âœ… Message history storage
âœ… User authentication integration
âœ… Rate limiting and security
âœ… Error handling and recovery
âœ… Responsive design
âœ… Multi-language support

## Next Steps After Integration

1. **Customize AI Behavior**
   - Modify prompts in `process_with_gemini()` function
   - Add custom context providers
   - Implement domain-specific knowledge

2. **Add Advanced Features**
   - File upload handling
   - Voice messages
   - Typing indicators
   - Message reactions

3. **Monitoring & Analytics**
   - Add logging service (Sentry)
   - Implement usage analytics
   - Set up monitoring dashboards

## Troubleshooting

### Common Issues

1. **CORS Errors**
   - Check CORS configuration in MCP server
   - Ensure frontend domain is allowed

2. **Authentication Errors**
   - Verify `VITE_MCP_AUTH_TOKEN` matches server token
   - Check header format in API requests

3. **Gemini API Errors**
   - Verify API key is correctly set
   - Check API quota and limits

### Testing Commands

```bash
# Test MCP server locally
cd gemini-mcp-server
python -m uvicorn app:app --reload

# Test frontend locally
npm run dev

# Test API connection
curl -X POST "http://localhost:8000/mcp/process" \
  -H "Content-Type: application/json" \
  -H "x-mcp-auth: test-token" \
  -d '{"query": "Hello", "user_id": "test"}'
```

## Security Checklist

- [ ] Use HTTPS in production
- [ ] Implement proper MCP authentication
- [ ] Set up rate limiting
- [ ] Configure CORS for specific domains
- [ ] Use environment variables for secrets
- [ ] Enable database connection pooling
- [ ] Set up monitoring and alerts

## Performance Optimization

- [ ] Enable Redis for caching
- [ ] Implement request queuing
- [ ] Set up CDN for static assets
- [ ] Optimize database queries
- [ ] Enable compression middleware

Your integration is ready to go live! ðŸš€ 